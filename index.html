<!DOCTYPE html>
<html>

<head>
    <title>Molar H/Corg Ratio Calculator</title>
    <style>
        body {
            font-family: Arial, Helvetica, sans-serif;
            background-color: #f2f2f2;
            text-align: center;
        }

        .container {
            max-width: 600px;
            margin: 0 auto;
            padding: 20px;
            background-color: #fff;
            border-radius: 10px;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
        }

        h1 {
            color: blue;
            font-size: 28px;
        }

        h2 {
            color: #333;
            font-size: 20px;
            margin-bottom: 15px;
        }

        input {
            display: block;
            margin: 10px auto;
            text-align: center;
        }

        input[type="number"],
        input[type="text"],
        input[type="date"] {
            width: 50%;
            padding: 5px;
            border: 1px solid #ccc;
            border-radius: 5px;
            font-size: 16px;
        }

        .time-input {
            display: flex;
            justify-content: center;
            align-items: center;
        }

        .time-input input {
            width: 24%;
            margin: 10px 0;
        }

        .btn-container {
            display: flex;
            justify-content: center;
            margin-top: 50px;
            margin-bottom: 20px;
        }

        button {
            padding: 10px 20px;
            background-color: #007BFF;
            color: #fff;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            font-size: 16px;
        }

        #result {
            margin-top: 20px;
            white-space: pre-line;
        }

        #logo {
            width: 400px;
            margin: 20px 0;
        }
    </style>
</head>

<body>
    <div class="container">
        <!-- Display the logo image -->
        <img id="logo" src="logo.png" alt="General Biochar Systems Logo">

        <h1>General Biochar Systems</h1>
        <h2 style="font-size: 20px; margin-bottom: 40px;">Molar H/Corg Ratio Calculator</h2>

        <label for="hydrogen">Enter the hydrogen ratio:</label>
        <input type="number" id="hydrogen" placeholder="Hydrogen ratio">

        <label for="carbon">Enter the carbon ratio:</label>
        <input type="number" id="carbon" placeholder="Carbon ratio">

        <!-- Additional input fields -->
        <label for="biomassType">Biomass Type:</label>
        <input type="text" id="biomassType" placeholder="Biomass Type">

        <label for="temperature">Temperature in Celsius:</label>
        <input type="number" id="temperature" placeholder="Temperature (°C)">

        <label for="residenceHours">Time in Residence:</label>
        <div class="time-input">
            <input type="number" id="residenceHours" placeholder="Hours">
            <input type="number" id="residenceMinutes" placeholder="Minutes" min="0" max="59">
        </div>

        <label for="fedBiomass">Fed Biomass:</label>
        <input type="number" id="fedBiomass" placeholder="Fed Biomass (kg)">

        <label for="BiocharYield">Biochar Yield:</label>
        <input type="number" id="BiocharYield" placeholder="Biochar Yield (kg)">

        <label for="sampleDate">Sample Date:</label>
        <input type="date" id="sampleDate">

        <div class="btn-container">
            <button onclick="calculateMolarRatio()">Calculate Molar Ratio</button>
            <div style="margin: 10px;"></div>
            <button onclick="downloadAsText()">Download as Text</button>
        </div>

        <p id="result"></p>
    </div>

    <script>
        function calculateMolarRatio() {
            // Get the values of the input fields
            var hydrogen = parseFloat(document.getElementById("hydrogen").value);
            var carbon = parseFloat(document.getElementById("carbon").value);
            var biomassType = document.getElementById("biomassType").value;
            var temperature = parseFloat(document.getElementById("temperature").value);
            var residenceHours = parseInt(document.getElementById("residenceHours").value);
            var residenceMinutes = parseInt(document.getElementById("residenceMinutes").value);
            var fedBiomass = parseFloat(document.getElementById("fedBiomass").value);
            var BiocharYield = parseFloat(document.getElementById("BiocharYield").value);
            var sampleDate = document.getElementById("sampleDate").value;

            // Initialize the error flag
            var hasError = false;

            // Check if the input is valid for hydrogen and carbon ratios
            if (isNaN(hydrogen) || isNaN(carbon) || carbon === 0) {
                document.getElementById("result").textContent = "Please enter valid numbers for hydrogen and carbon ratios. Carbon cannot be zero.";
                hasError = true;
            }

            // Check if the input is valid for residence time (minutes)
            if (!isNaN(residenceMinutes) && (residenceMinutes < 0 || residenceMinutes > 59)) {
                document.getElementById("result").textContent = "Please enter a valid number for minutes (0-59).";
                hasError = true;
            }

            // If there is no error, perform the calculation and display the result
            if (!hasError) {
                // Calculate the Molar H/Corg Ratio with 5 decimal places
                var molarRatio = (hydrogen / carbon) * (12 / 1.0);

                // Prepare the result message
                var resultMessage = "Molar H/Corg Ratio: " + molarRatio.toFixed(5) + "\n";

                // Display input values with labels if specified, otherwise display a blank field
                if (biomassType !== "") {
                    resultMessage += "Biomass Type: " + biomassType + "\n";
                }
                if (!isNaN(temperature)) {
                    resultMessage += "Temperature: " + temperature + "°C\n";
                }
                if (!isNaN(residenceHours) || !isNaN(residenceMinutes)) {
                    var hoursString = residenceHours > 0 ? residenceHours + " hours" : "";
                    var minutesString = residenceMinutes > 0 ? residenceMinutes + " minutes" : "";
                    var residenceTimeString = (hoursString + " " + minutesString).trim();
                    resultMessage += "Residence Time: " + residenceTimeString + "\n";
                }
                if (!isNaN(fedBiomass)) {
                    resultMessage += "Fed Biomass: " + fedBiomass + " kg\n";
                }
                if (!isNaN(BiocharYield)) {
                    resultMessage += "Biochar Yield: " + BiocharYield + " kg\n";
                }
                if (sampleDate !== "") {
                    resultMessage += "Sample Date: " + sampleDate + "\n";
                }

                // Display the result
                document.getElementById("result").textContent = resultMessage;
            }
        }

        function downloadAsText() {
            // Get the result text
            var resultText = document.getElementById("result").textContent;

            // Create a blob with the text content
            var blob = new Blob([resultText], { type: "text/plain" });

            // Create a temporary URL for the blob
            var url = window.URL.createObjectURL(blob);

            // Create a temporary link element to trigger the download
            var a = document.createElement("a");
            a.href = url;
            a.download = "molar_ratio.txt";

            // Trigger a click event to download the file
            a.click();

            // Release the allocated resources
            window.URL.revokeObjectURL(url);
        }
    </script>
</body>

</html>
